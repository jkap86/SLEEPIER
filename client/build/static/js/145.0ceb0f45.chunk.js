"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[145],{3145:(e,a,t)=>{t.r(a),t.d(a,{default:()=>n});var s=t(519);const o=t(2791).lazy((()=>t.e(870).then(t.bind(t,870))));var r=t(9434),l=t(6268),d=t(184);const n=e=>{let{display:a}=e;const t=(0,r.v9)((e=>e.progress.progress)),{isLoadingUser:n,isLoadingLeagues:c,errorUser:p}=(0,r.v9)((e=>e.user));return(0,s.Z)([]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(o,{progress:t}),n||c?(0,d.jsx)(l.Z,{}):p.error&&(0,d.jsx)("h1",{className:"error",children:p.error})||a]})}},8852:(e,a,t)=>{t.d(a,{BT:()=>d,MG:()=>p,SD:()=>c,fL:()=>o,oA:()=>r,um:()=>n,wR:()=>l});var s=t(1243);const o=e=>({type:"SET_STATE_USER",payload:e}),r=()=>({type:"RESET_STATE"}),l=e=>async a=>{a({type:"FETCH_COMMON_START",payload:{item:e}});try{const t=await s.Z.get("/main/".concat(e));"projections"===e&&console.log(t.data[0].filter((e=>4===e.week&&"8135"===e.player_id)));const o="projections"!==e?t.data[0]:t.data[0].reduce(((e,a)=>{const{week:t,player_id:s,injury_status:o,...r}=a;return e[t]||(e[t]={}),e[t][s]={...r,injury_status:o},e}),{});a({type:"FETCH_COMMON_SUCCESS",payload:{item:e,data:o}})}catch(t){a({type:"FETCH_COMMON_FAILURE",payload:t.message}),console.error(t.message)}},d=e=>async a=>{a({type:"FETCH_USER_START"});try{var t;const o=await s.Z.get("/user/create",{params:{username:e}});if(console.log(o.data),null!==(t=o.data)&&void 0!==t&&t.error)a({type:"FETCH_USER_FAILURE",payload:o.data});else{a({type:"FETCH_USER_SUCCESS",payload:o.data.user}),a({type:"SET_STATE_COMMON",payload:{state:o.data.state}});a({type:"SET_STATE_LINEUPS",payload:{week:"regular"===o.data.state.season_type?o.data.state.leg:o.data.state.season_type.includes("post")?19:1}})}}catch(o){a({type:"FETCH_USER_FAILURE",payload:o.message})}},n=e=>async a=>{a({type:"FETCH_LEAGUES_START"});try{const s=await fetch("/league/find?user_id=".concat(encodeURIComponent(e)),{method:"GET",headers:{Accept:"application/json"}});if(s.ok){const e=s.body.getReader();let o,r="";for(;;){const{done:t,value:s}=await e.read();if(t)break;r+=(new TextDecoder).decode(s);const o=r.match(/"league_id":/g);let l=0;o&&o.length>0&&(l=o.length),a({type:"SET_STATE_PROGRESS",payload:{progress:l}})}try{o=JSON.parse(r)}catch(t){console.log(t)}console.log(o),a({type:"FETCH_LEAGUES_SUCCESS",payload:o.flat()})}else a({type:"FETCH_LEAGUES_FAILURE",payload:"Failed to fetch user leagues"})}catch(t){a({type:"FETCH_LEAGUES_FAILURE",payload:t.message})}},c=e=>async a=>{a({type:"SET_STATE_USER",payload:{isLoadingPS:!0}});try{const t=await s.Z.get("/user/lmplayershares",{params:{user_id:e}});console.log({lmplayershares:t.data.sort(((e,a)=>e.username>a.username?1:-1))}),a({type:"SET_STATE_USER",payload:{lmplayershares:t.data,isLoadingPS:!1}})}catch(t){a({type:"SET_STATE_USER",payload:{isLoadingPS:!1,errorPS:t.message}})}},p=e=>async a=>{try{const t=await s.Z.post("/main/playervalues",{player_ids:e}),o={};t.data.forEach((e=>{o[e.date]||(o[e.date]={}),o[e.date][e.player_id]||(o[e.date][e.player_id]={}),o[e.date][e.player_id][e.type]=e.value})),a({type:"SET_STATE_COMMON",payload:{values:o}})}catch(t){console.log(t)}}},519:(e,a,t)=>{t.d(a,{Z:()=>d});var s=t(2791),o=t(7689),r=t(9434),l=t(8852);const d=e=>{const a=(0,r.I0)(),t=(0,o.UO)(),{user_id:d,isLoadingUser:n,username:c,leagues:p,isLoadingLeagues:y}=(0,r.v9)((e=>e.user)),{allplayers:E}=(0,r.v9)((e=>e.common));(0,s.useEffect)((()=>{var e;c&&(null===c||void 0===c?void 0:c.toLowerCase())!==(null===(e=t.username)||void 0===e?void 0:e.toLowerCase())&&a((0,l.oA)())}),[a,c,t.username]),(0,s.useEffect)((()=>{d||n||a((0,l.BT)(t.username))}),[a,d,t.username,n]),(0,s.useEffect)((()=>{!d||p||y||a((0,l.um)(d))}),[a,d,p,y]),(0,s.useEffect)((()=>{p&&(E||a((0,l.wR)("allplayers")))}),[a,E,p])}}}]);
//# sourceMappingURL=145.0ceb0f45.chunk.js.map